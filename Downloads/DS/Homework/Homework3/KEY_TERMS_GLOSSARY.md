# üìñ Key Terms Glossary - Session-Based Authentication

## Authentication & Authorization Terms

### **Authentication**
The process of verifying who a user is (confirming their identity), like checking an ID card to prove you are who you say you are.

### **Authorization**
The process of determining what an authenticated user is allowed to do (permissions and access control).

### **Session-Based Authentication**
An authentication method where the server stores user information in a session and identifies users with a session cookie.

### **Stateless**
A system where each request is independent and doesn't remember previous requests (HTTP is stateless by default).

### **Stateful**
A system that maintains information about previous interactions (sessions make HTTP stateful).

---

## Session Terms

### **Session**
A way to store information about a user across multiple HTTP requests, maintained on the server and identified by a unique session ID.

### **Session ID**
A unique identifier (like a ticket number) that the server uses to find a user's session data.

### **Session Cookie**
A small piece of data stored in the browser that contains the session ID, automatically sent with each request to identify the user.

### **Session Store**
The location where session data is stored (memory, database, or Redis in production).

### **Session Expiration**
The time after which a session becomes invalid and the user must log in again.

### **Session Fixation Attack**
A security attack where an attacker forces a victim to use the attacker's session ID, then gains access after the victim logs in.

---

## Password Security Terms

### **Password Hashing**
Converting a password into a scrambled, irreversible string using a mathematical algorithm, so the original password can never be recovered.

### **Hash**
The scrambled output of a hashing function - a one-way transformation that cannot be reversed.

### **Salt**
Random data added to a password before hashing to make each hash unique, even for the same password.

### **Salt Rounds**
The number of times a password is hashed (higher = more secure but slower), also called the cost factor.

### **bcrypt**
A password hashing algorithm designed to be slow and computationally expensive, making brute-force attacks difficult.

### **bcrypt.compareSync()**
A function that compares a plain text password with a hashed password to verify if they match.

### **bcrypt.hashSync()**
A function that hashes a password with a salt, creating a secure hash that can be stored in a database.

### **Rainbow Table Attack**
A pre-computed table of password hashes used to quickly crack passwords - prevented by using salts.

### **Plain Text Password**
An unencrypted password stored as-is (NEVER do this - always hash passwords).

---

## Express-Session Terms

### **express-session**
A middleware for Express.js that manages session creation, storage, and cookie handling.

### **Session Secret**
A secret key used to sign the session cookie, preventing tampering and ensuring cookie authenticity.

### **resave**
A session option that determines whether to save the session even if it hasn't been modified (set to false for performance).

### **saveUninitialized**
A session option that determines whether to create a session before storing data (set to false for security).

### **req.session**
An object containing the current user's session data, accessible in route handlers and middleware.

### **req.sessionID**
A unique identifier for the current session, automatically generated by express-session.

### **req.session.destroy()**
A method that removes the session from the session store, effectively logging the user out.

### **res.clearCookie()**
A method that removes a cookie from the client's browser by setting it to expire.

---

## Cookie Terms

### **Cookie**
A small piece of data stored in the browser and sent with each request to the same domain.

### **Set-Cookie Header**
An HTTP header sent by the server that tells the browser to store a cookie.

### **Cookie Attributes**
Settings that control cookie behavior: secure, httpOnly, maxAge, domain, path.

### **httpOnly**
A cookie attribute that prevents JavaScript from accessing the cookie, protecting against XSS attacks.

### **secure**
A cookie attribute that ensures the cookie is only sent over HTTPS connections (encrypted).

### **maxAge**
A cookie attribute that sets how long the cookie should last before expiring (in milliseconds).

### **connect.sid**
The default name of the session cookie created by express-session (can be customized).

---

## Route Protection Terms

### **Protected Route**
A route that requires authentication - users must be logged in to access it.

### **Public Route**
A route that anyone can access without authentication (like login page or home page).

### **Authentication Middleware**
A function that checks if a user is logged in before allowing access to protected routes.

### **requireAuth**
A middleware function that redirects unauthenticated users to the login page.

### **Route Guard**
Another term for authentication middleware that protects routes from unauthorized access.

---

## EJS Template Terms

### **EJS (Embedded JavaScript)**
A templating engine that allows embedding JavaScript code inside HTML files to create dynamic content.

### **Template Variable**
A piece of data passed from the server to the template (like `user` object).

### **<%= %>**
EJS syntax that outputs a value and automatically escapes HTML to prevent XSS attacks.

### **<% %>**
EJS syntax that executes JavaScript code without outputting anything (for conditionals and loops).

### **<%- %>**
EJS syntax that outputs raw HTML without escaping (use carefully to avoid XSS).

### **Conditional Rendering**
Showing different content in a template based on conditions (like showing "Login" or "Logout" based on auth status).

---

## Express Router Terms

### **Router**
A mini Express application that handles a group of related routes, allowing code organization.

### **express.Router()**
A function that creates a new router instance for modular route handling.

### **router.get()**
A method that defines a GET route handler on a router (instead of the main app).

### **router.post()**
A method that defines a POST route handler on a router.

### **app.use('/auth', authRoutes)**
Mounting a router at a specific path prefix, so all routes in the router are prefixed with that path.

---

## Security Terms

### **XSS (Cross-Site Scripting)**
An attack where malicious JavaScript is injected into a webpage, potentially stealing cookies or user data.

### **CSRF (Cross-Site Request Forgery)**
An attack where a malicious site makes requests on behalf of an authenticated user without their knowledge.

### **Input Validation**
Checking that user input meets expected criteria (required fields, correct format, etc.) before processing.

### **Generic Error Messages**
Using the same error message for different failure cases (like "Invalid username or password" for both wrong username and wrong password) to prevent information leakage.

### **Username Enumeration**
A security vulnerability where an attacker can determine which usernames exist in the system based on different error messages.

### **Password in URL**
A security risk where passwords appear in URLs (never use GET for login - always use POST).

---

## Middleware Terms

### **Middleware Stack**
The order in which middleware functions execute, processing requests from top to bottom.

### **next()**
A function passed to middleware that, when called, passes control to the next middleware or route handler.

### **Middleware Order**
The sequence of middleware matters - body-parser must run before routes that need req.body, session must run before routes that need req.session.

### **Error Handling Middleware**
Middleware with 4 parameters (err, req, res, next) that catches errors from route handlers.

---

## Request/Response Terms

### **req.body**
An object containing data from the request body (form data or JSON), populated by body-parser middleware.

### **req.originalUrl**
The original URL requested by the client, useful for redirecting after login.

### **res.redirect()**
A method that sends the browser to a different URL (like redirecting to dashboard after login).

### **res.render()**
A method that renders an EJS template with data and sends the resulting HTML to the browser.

### **Destructuring**
Extracting values from objects into variables: `const { username, password } = req.body`.

---

## Data Storage Terms

### **In-Memory Storage**
Data stored in RAM that is lost when the server restarts (used for demo - not suitable for production).

### **Session Store**
The persistent storage location for sessions (memory, database, or Redis in production).

### **Shared Session Store**
A session store accessible by multiple servers, required for load balancing and scaling.

### **Redis**
An in-memory data store often used for session storage in production, providing fast access and persistence.

---

## Authentication Flow Terms

### **Login Flow**
The sequence of steps: user submits credentials ‚Üí server validates ‚Üí creates session ‚Üí sends cookie ‚Üí redirects to dashboard.

### **Logout Flow**
The sequence of steps: user clicks logout ‚Üí server destroys session ‚Üí clears cookie ‚Üí redirects to home.

### **Session Lookup**
The process of finding session data using the session ID from the cookie.

### **Session Creation**
The process of generating a new session ID and storing user data in the session store.

---

## HTTP Status Code Terms

### **200 OK**
HTTP status code meaning the request was successful.

### **302 Found (Redirect)**
HTTP status code meaning the browser should go to a different URL (used for redirects after login/logout).

### **401 Unauthorized**
HTTP status code meaning authentication is required (not used in this homework, but common in APIs).

### **403 Forbidden**
HTTP status code meaning the user is authenticated but doesn't have permission (authorization failure).

---

## JavaScript Terms Used

### **Array.find()**
A method that searches an array and returns the first item matching a condition (used to find users by username).

### **typeof**
An operator that returns the type of a variable (used to check if error exists: `typeof error !== 'undefined'`).

### **Callback Function**
A function passed as an argument to another function, executed later (like the callback in `req.session.destroy()`).

### **Arrow Function**
A shorter way to write functions: `(req, res) => {}` instead of `function(req, res) {}`.

---

## Form Terms

### **Form Action**
The URL where form data is sent when submitted (like `/auth/login`).

### **Form Method**
The HTTP method used (POST for login to avoid exposing password in URL).

### **Input Type="password"**
An HTML input that hides the entered text (shows dots/asterisks) for security.

### **Required Attribute**
An HTML5 attribute that prevents form submission if the field is empty.

---

## Server Terms

### **app.listen()**
An Express method that starts the server and makes it listen for incoming requests on a specific port.

### **PORT**
An environment variable or number that identifies which program should receive network requests (default: 3000).

### **process.env.PORT**
Accessing the PORT environment variable, allowing configuration via environment variables.

---

## Real-World Analogy

Think of session-based authentication like a **nightclub with wristbands**:

- **Authentication** = Checking ID at the door to verify age/identity
- **Session** = The wristband you get after showing ID
- **Session ID** = The unique number/color on your wristband
- **Session Cookie** = The wristband itself (proves you're allowed in)
- **Session Store** = The bouncer's list of who has wristbands
- **Password Hashing** = Encrypting the ID check so no one can fake it
- **Protected Route** = VIP area that requires a wristband
- **Login** = Getting your wristband at the door
- **Logout** = Returning your wristband when leaving
- **Session Expiration** = Wristband expires at closing time
- **httpOnly Cookie** = Wristband can't be copied or transferred
- **secure Cookie** = Wristband only works at the official venue (HTTPS)

---

## Quick Reference: Most Important Terms

1. **Session** = Server-side storage of user data across requests
2. **Session Cookie** = Browser-stored ID that identifies the session
3. **Authentication** = Verifying user identity
4. **Password Hashing** = Converting password to irreversible hash
5. **bcrypt** = Secure password hashing algorithm
6. **express-session** = Middleware for managing sessions
7. **Protected Route** = Route requiring authentication
8. **req.session** = Object containing current user's session data
9. **Middleware** = Functions that process requests before routes
10. **EJS** = Templating engine for dynamic HTML
11. **Router** = Modular way to organize routes
12. **httpOnly** = Cookie attribute preventing JavaScript access
13. **Salt** = Random data added to password before hashing
14. **Session Expiration** = Time limit for session validity
15. **XSS** = Attack prevented by HTML escaping in templates

---

## Comparison: Session vs Token Authentication

| Feature | Session-Based (HW3) | Token-Based (JWT - HW7) |
|---------|---------------------|------------------------|
| **Storage** | Server-side | Client-side |
| **Scalability** | Requires shared store | Stateless, scales easily |
| **Security** | Server controls sessions | Token can be stolen |
| **Use Case** | Traditional web apps | APIs, SPAs, mobile apps |
| **Logout** | Destroy session | Token valid until expiry |
| **State** | Stateful | Stateless |

---

## Security Best Practices Checklist

‚úÖ **Do:**
- Hash passwords with bcrypt
- Use strong session secrets
- Set httpOnly cookies
- Use secure cookies in production (HTTPS)
- Set session expiration
- Use generic error messages
- Validate all input
- Use POST for login (not GET)

‚ùå **Don't:**
- Store plain text passwords
- Use weak session secrets
- Expose session IDs in URLs
- Store sensitive data in cookies
- Allow session fixation
- Reveal which field is wrong in errors
- Trust client-side validation only
- Send passwords in URLs

---

## Common Session Configuration Options

### **secret**
- **Purpose**: Signs the session cookie
- **Example**: `'your-secret-key-change-in-production'`
- **Important**: Must be strong and unique in production

### **resave: false**
- **Purpose**: Don't save unmodified sessions
- **Benefit**: Improves performance

### **saveUninitialized: false**
- **Purpose**: Don't create session until data is stored
- **Benefit**: Prevents session fixation attacks

### **cookie.secure: false**
- **Purpose**: Allow cookies over HTTP (for development)
- **Production**: Set to `true` for HTTPS only

### **cookie.httpOnly: true**
- **Purpose**: Prevent JavaScript access to cookie
- **Benefit**: Protects against XSS attacks

### **cookie.maxAge**
- **Purpose**: Set session expiration time
- **Example**: `24 * 60 * 60 * 1000` (24 hours in milliseconds)

---

## Debugging Session Issues

### **Session Not Persisting**
- Check if cookie is being set (browser DevTools ‚Üí Application ‚Üí Cookies)
- Verify session middleware is configured correctly
- Check if session store is working

### **Can't Access Protected Routes**
- Verify `req.session.user` exists
- Check if session middleware runs before routes
- Ensure cookie is being sent with requests

### **Password Comparison Failing**
- Verify password is hashed correctly when stored
- Check if using `bcrypt.compareSync()` correctly
- Ensure same salt rounds used for hashing and comparison

---

## Next Steps & Related Topics

After mastering session-based authentication, explore:

- **JWT Authentication (HW7)**: Token-based, stateless authentication
- **OAuth**: Third-party authentication (Google, Facebook login)
- **Redis Sessions**: Production session storage
- **Role-Based Access Control (RBAC)**: Authorization beyond authentication
- **Multi-Factor Authentication (MFA)**: Additional security layers
